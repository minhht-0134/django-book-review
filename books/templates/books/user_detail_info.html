<div class="col-md user_info">
  <div class="d-flex align-items-center p-3 text-white-50 bg-primary rounded">
    {% include 'books/user_icon.html' with size=80 %}
    <div class="lh-100">
      <h5 class="mb-0 text-white lh-100">{{ user }}</h5>
      <small>{{ user.email }}</small>
    </div>
  </div>
  <br>
  {% if user.id != request.user.id %}
    {% if follow_act is None %}
      <button
        class="btn btn-primary follow_button"
        data-target-id="{{ user.id }}"
      >
        Follow
      </button>
    {% else %}
      <button
        class="btn btn-primary follow_button"
        data-target-id="{{ user.id }}"
        data-activity-id="{{ follow_act.id }}"
      >
        UnFollow
      </button>
    {% endif %}
  {% endif %}

  <div class="statistic">
    <div class="bg-warning text-white mb-4 rounded">
      <div class="card-body">Fiends</div>
      <div class="card-footer d-flex align-items-center justify-content-between">
        <div class="row pl-3">
          <span class="small text-white pr-2">Following</span>
          <span class="small text-white pl-2 pr-2 number">{{ following_count }}</span>
        </div>
        <div class="small text-white clickable" data-toggle="collapse" href="#collapseFollowing">
          {% include 'books/arrange_right.html' with size=20 %}
        </div>
      </div>
      {% if following_users %}
        <div class="collapse card-footer" id="collapseFollowing">
          {% for user in following_users %}
            <span
              class="clickable"
              onclick=window.location.href='{% url "user_detail" user.id %}'
            >
              {% include 'books/user_icon.html' with size=25 %}
              <span class="small">{{ user }}</span>
            </span>
          {% endfor %}
        </div>
      {% endif %}

      <div class="card-footer d-flex align-items-center justify-content-between">
        <div class="row pl-3">
          <span class="small text-white pr-2">Follower</span>
          <span class="small text-white pl-2 pr-2 number">{{ followed_count }}</span>
        </div>
        <div class="small text-white clickable" data-toggle="collapse" href="#collapseFollowed">
          {% include 'books/arrange_right.html' with size=20 %}
        </div>
      </div>
      {% if followed_users %}
        <div class="collapse card-footer" id="collapseFollowed">
          {% for user in followed_users %}
            <span
              class="clickable"
              onclick=window.location.href='{% url "user_detail" user.id %}'
            >
              {% include 'books/user_icon.html' with size=25 %}
              <span class="small">{{ user }}</span>
            </span>
          {% endfor %}
        </div>
      {% endif %}
    </div>

    <div class="bg-warning text-white mb-4 rounded">
      <div class="card-body">Books</div>
      <div class="card-footer d-flex align-items-center justify-content-between">
        <div class="row pl-3">
          <span
            class="small text-white pr-2 clickable"
            onclick=window.location.href='{% url "book_list" %}?user_id={{ user.id }}&reading=on'
          >
            Reading
          </span>
          <span class="small text-white pl-2 pr-2 number">{{ reading_count }}</span>
        </div>
        <div class="small text-white clickable" data-toggle="collapse" href="#collapseReading">
          {% include 'books/arrange_right.html' with size=20 %}
        </div>
      </div>
      {% if reading_books %}
        <div class="collapse card-footer" id="collapseReading">
          {% for book in reading_books %}
            <div
              class="clickable"
              onclick=window.location.href='{% url "book_detail" book.id %}'
            >
              {% include 'books/book_icon.html' with size=15 %}
              <span class="small">{{ book }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <div class="card-footer d-flex align-items-center justify-content-between">
        <div class="row pl-3">
          <span
            class="small text-white pr-2 clickable"
            onclick=window.location.href='{% url "book_list" %}?user_id={{ user.id }}&readed=on'
          >
            Readed
          </span>
          <span class="small text-white pl-2 pr-2 number">{{ readed_count }}</span>
        </div>
        <div class="small text-white clickable" data-toggle="collapse" href="#collapseReaded">
          {% include 'books/arrange_right.html' with size=20 %}
        </div>
      </div>
      {% if readed_books %}
        <div class="collapse card-footer" id="collapseReaded">
          {% for book in readed_books %}
            <div
              class="clickable"
              onclick=window.location.href='{% url "book_detail" book.id %}'
            >
              {% include 'books/book_icon.html' with size=15 %}
              <span class="small">{{ book }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <div class="card-footer d-flex align-items-center justify-content-between">
        <div class="row pl-3">
          <span
            class="small text-white pr-2 clickable"
            onclick=window.location.href='{% url "book_list" %}?user_id={{ user.id }}&favorite=on'
          >
            Favorite
          </span>
          <span class="small text-white pl-2 pr-2 number">{{ favorite_count }}</span>
        </div>
        <div class="small text-white clickable" data-toggle="collapse" href="#collapseFavotire">
          {% include 'books/arrange_right.html' with size=20 %}
        </div>
      </div>
      {% if favorite_books %}
        <div class="collapse card-footer" id="collapseFavotire">
          {% for book in favorite_books %}
            <div
              class="clickable"
              onclick=window.location.href='{% url "book_detail" book.id %}'
            >
              {% include 'books/book_icon.html' with size=15 %}
              <span class="small">{{ book }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <div class="card-footer d-flex align-items-center justify-content-between">
        <div class="row pl-3">
          <span class="small text-white pr-2">
            Reviews
          </span>
          <span class="small text-white pl-2 pr-2 number">{{ review_count }}</span>
        </div>
        <div class="small text-white clickable" data-toggle="collapse" href="#collapseReview">
          {% include 'books/arrange_right.html' with size=20 %}
        </div>
      </div>
      {% if reviews %}
        <div class="collapse card-footer" id="collapseReview">
          {% for review in reviews %}
            <div
              class="clickable"
              onclick=window.location.href='{% url "book_detail" review.target_object_id %}'
            >
              {% include 'books/pen_icon.html' with size=15 %}
              <span class="small">{{ review.content }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
